---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: materialized
---
apiVersion: materialize.cloud/v1
kind: Eip
---
apiVersion: kuttl.dev/v1beta1
kind: TestAssert
timeout: 90
commands:
- script: >-
    kubectl exec -n $NAMESPACE commander -- /scripts/assert-addresses.py
- script: >-
    kubectl -n $NAMESPACE get eips -ojson
    | jq -e '.items[] | select(.metadata.name | test("materialized-")).status.allocationId'
---
